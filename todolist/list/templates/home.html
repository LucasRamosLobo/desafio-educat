{% block content %}
  <h2>Bem-vindo(a)!</h2>
  <p>Você está logado(a) como {{ user.username }}.</p>

  <h3>Suas Tarefas</h3>
  <ul>
    {% for task in tasks %}
      <li>
        <strong>Tarefa:</strong> {{ task.description }}<br>
        <strong>Data de Criação:</strong> {{ task.tasklog.created_at }}<br>
        <strong>Log:</strong> {{ task.tasklog.message }}<br>
        <strong>Status:</strong> {{ task.get_status_display }}<br>
        <form method="POST" action="{% url 'list:update_status' task.id %}">
          {% csrf_token %}
          <select name="status">
            <option value="IN_PROGRESS" {% if task.status == 'IN_PROGRESS' %}selected{% endif %}>Em andamento</option>
            <option value="COMPLETED" {% if task.status == 'COMPLETED' %}selected{% endif %}>Concluída</option>
          </select>
          <button type="submit">Atualizar Status</button>
        </form>
      </li>
    {% empty %}
      <li>Nenhuma tarefa encontrada.</li>
    {% endfor %}
  </ul>

  <h3>Adicionar Tarefa</h3>
  <form method="POST" action="{% url 'list:home' %}">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit">Adicionar</button>
  </form>
{% endblock %}
